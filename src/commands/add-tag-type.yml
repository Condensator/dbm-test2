description: >
  Add a Tag Type to the DBmaestro DevOps Platform

parameters:
  tool_path:
    type: string
    default: "tools/dbmaestro"
    description: "Path where the DBmaestroAgent.jar is located"
  tag_type_name:
    type: string
    description: "DBmaestro tag type name."
  server_address:
    type: string
    description: "DBmaestro server address"
  auth_type:
    type: string
    default: "DBmaestroAccount"
    description: "DBmaestro auth type"
  username:
    type: string
    description: "DBmaestro username"
  password:
    type: string
    description: "DBmaestro password"
steps:
  - run:
      environment:
        DBM_TOOL_PATH: << parameters.tool_path >>
        DBM_TAG_TYPE_NAME: << parameters.tag_type_name >>
        DBM_SERVER_ADDRESS: << parameters.server_address >>
        DBM_AUTH_TYPE: << parameters.auth_type >>
        DBM_USERNAME: << parameters.username >>
        DBM_PASSWORD: << parameters.password >>
      name: Add tag
      command: java -jar "$DBM_TOOL_PATH/DBmaestroAgent.jar" -AddTagType -TagTypeName "$DBM_TAG_TYPE_NAME" -Server "$DBM_SERVER_ADDRESS" -AuthType "$DBM_AUTH_TYPE" -UserName "$DBM_USERNAME" -Password "$DBM_PASSWORD"
