description: >
  Ensure environment has DBmaestroAgent.jar
  If not - download it

parameters:
  tool_path:
    type: string
    default: "~/usr/local/tools/dbmaestro"
    description: "Path where the DBmaestroAgent.jar is located"
  project_name:
    type: string
    description: "DBmaestro project name"
  environment_name:
    type: string
    description: "DBmaestro environment name"
  package_name: 
    type: string
    default: "@currentversion"
    description: "DBmaestro package name. By default runs validation against current version"
  server_address:
    type: string
    description: "DBmaestro server address"
steps:
  - run:
      environment:
        dbm_tool_path: << parameters.tool_path >>
      name: Download Agent
      command: <<include(scripts/download-agent.sh)>>
